{% extends "layout.html" %}
{% block title %}
  Tasks in {{ jobfolder }}
{% endblock title %}
{% block layout-content %}
  <p>
    <a href="{% url "job-index" %}">Back to full internship list.</a>
  </p>
  <hr />
  <h2>Instructions</h2>
  {% include "payments/components/jobfolder_info.html" %}
  <h2>Tasks</h2>
  <table class="table table-striped">
    <tr>
      <th>Task description</th>
      <th>â™ ï¸</th>
      <th>ğŸ’²</th>
      <th>
        {% if request.user.is_superuser %}
          Claimant
        {% else %}
          Status
        {% endif %}
      </th>
    </tr>
    {% for job in jobs %}
      <tr {% if job.assignee.user == request.user %}class="table-success fw-bold"{% endif %}>
        <td>
          <span class="emoji-text">
            {% if job.progress == "JOB_VFD" %}
              âœ…
            {% elif job.progress == "JOB_REV" %}
              ğŸ”
            {% elif job.progress == "JOB_SUB" %}
              ğŸ“¤
            {% elif job.progress == "JOB_NEW" and job.assignee %}
              â›”
            {% else %}
              ğŸŒŸ
            {% endif %}
          </span>
          <a href="{{ job.get_absolute_url }}">{{ job.name }}</a>
        </td>
        <td>{{ job.spades_bounty }}</td>
        <td>{{ job.usd_bounty }}</td>
        <td>
          {% if request.user.is_superuser %}
            <a href="{% url "admin:payments_job_change" job.pk %}">{{ job.assignee.user.get_full_name }}</a>
          {% else %}
            {{ job.status }}
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </table>
  <h2>Legend</h2>
  <ul class="list-unstyled">
    <li>
      <span class="emoji-text">âœ…</span> Completed
    </li>
    <li>
      <span class="emoji-text">ğŸ”</span> Revisions requested
    </li>
    <li>
      <span class="emoji-text">ğŸ“¤</span> Submitted
    </li>
    <li>
      <span class="emoji-text">â›”</span> In progress
    </li>
    <li>
      <span class="emoji-text">ğŸŒŸ</span> Unclaimed
    </li>
  </ul>
{% endblock layout-content %}
